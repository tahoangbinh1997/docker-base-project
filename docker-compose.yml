# version: '3'

# services:
#   svelte-frontend:
#     image: svelte-docker-node

#     build:
#       context: /svelte-build-project
#       dockerfile: Dockerfile
#       target: deploy-node
#     ports:
#       - "5050:5050"
  # strapi-backend:
  #   image: strapi/strapi
  #   container_name: strapi
  #   env_file:
  #     - /basic_strapi/.env

  #   build:
  #     context: /basic_strapi
  #     dockerfile: Dockerfile
  #     target: deploy-node
  #   ports:
  #     - "1337:1337"

version: '3'
services:
  frontend:
    container_name: ${PROJECT_SLUG}_frontend
    build:
      context: .
      dockerfile: ./Dockerfile
      args:
        - NODE_ENV=${ENVIRONMENT}
    restart: unless-stopped
    networks:
      - internal
    volumes:
      - ./svelte-build-project:/build
      - /app/node_modules
      - /app/.svelte-kit
      - ./logs/svelte-build-project:/root/.npm/_logs
    env_file:
      - ./.env
    ports:
      - "5000:5000"

volumes:
  postgres-data:

networks:
  internal:
    name: ${PROJECT_SLUG}_internal
    driver: bridge
